<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSN Messenger 2004</title>
    <style>
        /* [GARDEZ TOUT LE CSS PR√âC√âDENT - il est correct] */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Tahoma", "Arial", sans-serif; }
        body { background: #0066cc; height: 100vh; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        .msn-container { width: 95%; height: 95%; background-color: rgba(236, 233, 216, 0.95); border: 2px solid #003399; border-radius: 5px; box-shadow: 0 0 20px rgba(0, 0, 0, 0.5); display: flex; flex-direction: column; overflow: hidden; }
        /* ... [TOUT LE CSS RESTE IDENTIQUE] ... */
    </style>
</head>
<body>
    <!-- FORMULAIRE SIMPLIFI√â -->
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <div class="login-header">MSN Messenger 2004 - Connexion</div>
            
            <input type="text" class="login-input" id="usernameInput" placeholder="Nom d'utilisateur" value="TestUser">
            
            <div class="gender-selection">
                <label class="gender-option male selected">
                    <input type="radio" name="gender" value="male" checked> üë® Masculin
                </label>
                <label class="gender-option female">
                    <input type="radio" name="gender" value="female"> üë© F√©minin
                </label>
            </div>
            
            <button class="login-btn" id="loginBtn" style="background: #4CAF50; color: white;">Se connecter (Test)</button>
            
            <div style="font-size: 10px; text-align: center; margin-top: 10px; color: #666;">
                Version de test - Connexion instantan√©e
            </div>
        </div>
    </div>

    <!-- [GARDEZ TOUTE L'INTERFACE MSN IDENTIQUE] -->

    <script>
        // VARIABLES SIMPLIFI√âES
        let currentUser = null;
        let userColor = '#000000';
        let userGender = 'male';
        let userUsername = '';
        let isAdmin = false;

        // INITIALISATION SIMPLE
        document.addEventListener('DOMContentLoaded', function() {
            // Gestion du genre
            document.querySelectorAll('input[name="gender"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    userGender = this.value;
                    document.querySelectorAll('.gender-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.parentElement.classList.add('selected');
                });
            });

            // CONNEXION SIMPLIFI√âE
            document.getElementById('loginBtn').addEventListener('click', function() {
                userUsername = document.getElementById('usernameInput').value || 'Utilisateur';
                
                if (!userUsername) {
                    alert('Veuillez entrer un nom d\'utilisateur');
                    return;
                }

                currentUser = {
                    username: userUsername,
                    gender: userGender,
                    email: userUsername + '@msn.com'
                };

                // V√©rifier si admin
                isAdmin = userUsername.toLowerCase() === 'admin';
                
                showChatInterface();
            });

            // Gestion de l'envoi de messages
            document.getElementById('sendBtn').addEventListener('click', sendMessage);
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });

            // Gestion du Wizz
            document.getElementById('wizzBtn').addEventListener('click', sendWizz);
        });

        // FONCTIONS PRINCIPALES
        function showChatInterface() {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('msnContainer').style.display = 'flex';
            
            // Afficher badge admin si n√©cessaire
            if (isAdmin) {
                document.getElementById('adminToggle').style.display = 'flex';
                document.getElementById('adminBadge').style.display = 'inline';
            }

            // Message de bienvenue
            const genderColor = userGender === 'male' ? '#ff9900' : '#ff66cc';
            const messagesContainer = document.getElementById('chatMessages');
            const now = new Date();
            const timeString = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            const welcomeElement = document.createElement('div');
            welcomeElement.className = 'message received';
            welcomeElement.innerHTML = `
                <div class="message-sender">Syst√®me <span class="message-time">${timeString}</span></div>
                <div class="message-text">Bienvenue <span style="color: ${genderColor}">${userUsername}</span> ! ${isAdmin ? 'Vous √™tes administrateur.' : ''}</div>
            `;
            
            messagesContainer.appendChild(welcomeElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function sendMessage() {
            if (!currentUser) return;
            
            const input = document.getElementById('messageInput');
            const messageText = input.value.trim();
            
            if (messageText) {
                const genderColor = userGender === 'male' ? '#ff9900' : '#ff66cc';
                const messagesContainer = document.getElementById('chatMessages');
                const now = new Date();
                const timeString = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const messageElement = document.createElement('div');
                messageElement.className = 'message sent';
                messageElement.innerHTML = `
                    <div class="message-sender" style="color: ${genderColor};">${userUsername} ${isAdmin ? '<span style="color: #ff0000;">[ADMIN]</span>' : ''} <span class="message-time">${timeString}</span></div>
                    <div class="message-text" style="color: ${genderColor};">${messageText}</div>
                `;
                
                messagesContainer.appendChild(messageElement);
                input.value = '';
                messagesContainer.scrollTop = messagesContainer.scrollHeight;

                // R√©ponse automatique
                setTimeout(() => {
                    const responses = ["Cool !", "Int√©ressant...", "Haha üòÑ", "D'accord !"];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    
                    const responseElement = document.createElement('div');
                    responseElement.className = 'message received';
                    responseElement.innerHTML = `
                        <div class="message-sender">Bot <span class="message-time">${now.getHours()}:${(now.getMinutes() + 1).toString().padStart(2, '0')}</span></div>
                        <div class="message-text">${randomResponse}</div>
                    `;
                    
                    messagesContainer.appendChild(responseElement);
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000 + Math.random() * 2000);
            }
        }

        function sendWizz() {
            if (!currentUser) return;
            
            document.getElementById('msnContainer').classList.add('wizz-active');
            
            const messagesContainer = document.getElementById('chatMessages');
            const now = new Date();
            const timeString = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            const wizzElement = document.createElement('div');
            wizzElement.className = 'message received';
            wizzElement.innerHTML = `
                <div class="message-sender">Syst√®me <span class="message-time">${timeString}</span></div>
                <div class="message-text" style="font-weight: bold; color: #ff6600;">${userUsername} a envoy√© un Wizz ! üå™Ô∏è</div>
            `;
            
            messagesContainer.appendChild(wizzElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            setTimeout(() => {
                document.getElementById('msnContainer').classList.remove('wizz-active');
            }, 1000);
        }

        // [LES AUTRES FONCTIONS RESTENT SIMILAIRES]
    </script>
</body>
</html>